<!DOCTYPE html>
<head>
    <h2>東大式体力テストからCoCステータス計算</h2>
    <title>体力テスト→CoC</title>
</head>
<body>
    <label>反復横跳び <input type="text" id="dex_calc">点</label><br />
    <label>踏み台昇降 <input type="text" id="con_calc">回/90s</label><br />
    <label>腕立て伏せ <input type="text" id="str_calc">回</label><br />
    <br />
    <p>数値は全て半角で入力してください。</p>
    <br />
    <input type="button" value="計算" id="checkButton">
    <p id="msg1"></p>
    <p id="msg2">計算ボタンを押すとここに計算結果が表示されます</p>
    <p id="msg3"></p>
    <script>

        let box1 = document.getElementById('str_calc');
        let box2 = document.getElementById('dex_calc');
        let box3 = document.getElementById('con_calc');

        let checkButton = document.getElementById('checkButton');
        checkButton.addEventListener('click', buttonClick);

        let msg1 = document.getElementById('msg1');
        let msg2 = document.getElementById('msg2');
        let msg3 = document.getElementById('msg3');

        function buttonClick(){
            let average, sd, num, ans7, ans6;

            //腕立て
            average = 26.7; sd = 11.4;
            num = Number(box1.value);
            ans7 = ((num - average) / sd * (14.79) + 52.5);
            ans6 = ((num - average) / sd * (14.79 / 5.0) + 10.5);
            msg1.innerText = 'STR: ' + Math.round(ans7 * 100) / 100 + "(7 版) / " +
            Math.round(ans6 * 100) / 100 + "(6 版)";

            //反復
            average = 48.5; sd = 6.1;
            num = Number(box2.value);
            ans7 = ((num - average) / sd * (14.79) + 52.5);
            ans6 = ((num - average) / sd * (14.79 / 5.0) + 10.5);
            msg2.innerText = 'DEX: ' + Math.round(ans7 * 100) / 100 + "(7 版) / " +
            Math.round(ans6 * 100) / 100 + "(6 版)";

            //踏み段
            average = 168.1; sd = 24.0;
            num = Number(box3.value);
            ans7 = (-(num - average) / sd * (14.79) + 52.5);
            ans6 = (-(num - average) / sd * (14.79 / 5.0) + 10.5);
            msg3.innerText = 'CON: ' + Math.round(ans7 * 100) / 100 + "(7 版) / " +
            Math.round(ans6 * 100) / 100 + "(6 版)";
        }

    </script>
    <h4>【計算方法】</h4>
    <p>「身体運動・健康科学ベーシック」pp.204 記載の 2024 年度入学者の
体力テスト結果の男子 1 年終了時の平均値と標準偏差を
キャラクターシート作成時のダイスの出目(3d6)の平均値と標準偏差に対応させ、
そこから数値を換算しています。
(そのため 15 未満や 99 より大きい値が得られることがあります)<br />
・STR = 腕立て伏せから算出<br />
・DEX = 反復横跳びから算出<br />
・CON = 踏み台段昇降から算出<br />
    </p>
</body>
